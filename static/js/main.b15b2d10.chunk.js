(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,o,i){e.exports=i.p+"static/media/cardblue.d5c52a45.png"},172:function(e,o,i){e.exports=i.p+"static/media/git_icon.023263a0.svg"},173:function(e,o,i){e.exports=i(430)},215:function(e,o){},217:function(e,o){},251:function(e,o){},252:function(e,o){},318:function(e,o){},420:function(e,o,i){},425:function(e,o,i){},428:function(e,o,i){},430:function(e,o,i){"use strict";i.r(o);var t=i(0),n=i.n(t),a=i(97),r=i.n(a),s=i(24),A=i(25),l=i(27),K=i(26),c=i(28),u=i(36),g=i(170),d=i.n(g),p=function(e){function o(e){var i;return Object(s.a)(this,o),(i=Object(l.a)(this,Object(K.a)(o).call(this,e))).state={isOpen:!1},i.closeModal=i.closeModal.bind(Object(u.a)(Object(u.a)(i))),i.updateFocus=i.updateFocus.bind(Object(u.a)(Object(u.a)(i))),i}return Object(c.a)(o,e),Object(A.a)(o,[{key:"openModal",value:function(){this.setState({isOpen:!0})}},{key:"closeModal",value:function(){this.setState({isOpen:!1}),"function"===typeof this.props.onClose&&this.props.onClose()}},{key:"keydownHandler",value:function(e){27===e.keyCode&&this.closeModal()}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.keydownHandler.bind(this),!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.keydownHandler)}},{key:"componentWillReceiveProps",value:function(e){this.setState({isOpen:e.isOpen})}},{key:"componentDidUpdate",value:function(){this.state.isOpen&&this.modal&&this.modal.focus()}},{key:"updateFocus",value:function(e){9===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.modal===document.activeElement?this.modalbtn.focus():this.modal.focus())}},{key:"getQueryString",value:function(e){var o="";for(var i in e)e.hasOwnProperty(i)&&null!==e[i]&&(o+=i+"="+e[i]+"&");return o.substr(0,o.length-1)}},{key:"getYoutubeUrl",value:function(e,o){return"//www.youtube.com/embed/"+o+"?"+this.getQueryString(e)+"&autoplay=1&mute=1"}},{key:"getVimeoUrl",value:function(e,o){return"//player.vimeo.com/video/"+o+"?"+this.getQueryString(e)}},{key:"getYoukuUrl",value:function(e,o){return"//player.youku.com/embed/"+o+"?"+this.getQueryString(e)}},{key:"getVideoUrl",value:function(e,o){return"youtube"===e.channel?this.getYoutubeUrl(e.youtube,o):"vimeo"===e.channel?this.getVimeoUrl(e.vimeo,o):"youku"===e.channel?this.getYoukuUrl(e.youku,o):void 0}},{key:"getPadding",value:function(e){var o=e.split(":"),i=Number(o[0]);return 100*Number(o[1])/i+"%"}},{key:"render",value:function(){var e=this,o={paddingBottom:this.getPadding(this.props.ratio)};return n.a.createElement(d.a,{classNames:this.props.classNames.modalVideoEffect,timeout:this.props.animationSpeed},function(){return e.state.isOpen?n.a.createElement("div",{className:e.props.classNames.modalVideo,tabIndex:"-1",role:"dialog","aria-label":e.props.aria.openMessage,onClick:e.closeModal,ref:function(o){e.modal=o},onKeyDown:e.updateFocus},n.a.createElement("div",{className:e.props.classNames.modalVideoBody},n.a.createElement("div",{className:e.props.classNames.modalVideoInner},n.a.createElement("div",{className:e.props.classNames.modalVideoIframeWrap,style:o},n.a.createElement("button",{className:e.props.classNames.modalVideoCloseBtn,"aria-label":e.props.aria.dismissBtnMessage,ref:function(o){e.modalbtn=o},onKeyDown:e.updateFocus}),n.a.createElement("iframe",{width:"460",height:"230",src:e.getVideoUrl(e.props,e.props.videoId),frameBorder:"0",allowFullScreen:e.props.allowFullScreen,tabIndex:"-1"}))))):null})}}]),o}(n.a.Component);p.defaultProps={channel:"youtube",isOpen:!1,youtube:{autoplay:1,cc_load_policy:1,color:null,controls:1,disablekb:0,enablejsapi:0,end:null,fs:1,h1:null,iv_load_policy:1,list:null,listType:null,loop:0,modestbranding:null,origin:null,playlist:null,playsinline:null,rel:0,showinfo:1,start:0,wmode:"transparent",theme:"dark"},ratio:"16:9",vimeo:{api:!1,autopause:!0,autoplay:!0,byline:!0,callback:null,color:null,height:null,loop:!1,maxheight:null,maxwidth:null,player_id:null,portrait:!0,title:!0,width:null,xhtml:!1},youku:{autoplay:1,show_related:0},allowFullScreen:!0,animationSpeed:300,classNames:{modalVideoEffect:"modal-video-effect",modalVideo:"modal-video",modalVideoClose:"modal-video-close",modalVideoBody:"modal-video-body",modalVideoInner:"modal-video-inner",modalVideoIframeWrap:"modal-video-movie-wrap",modalVideoCloseBtn:"modal-video-close-btn"},aria:{openMessage:"You just openned the modal video",dismissBtnMessage:"Close the modal by clicking here"}};var m=i(15),h=i.n(m),f=i(29),v=i(188),C=i(417),y=function(e,o){return Math.floor(Math.random()*(o-e+1))+e},w=function(){var e=Object(f.a)(h.a.mark(function e(o){var i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(o,{json:!0});case 3:return i=e.sent,e.abrupt("return",i);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","error");case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(o){return e.apply(this,arguments)}}(),b=function(){var e=Object(f.a)(h.a.mark(function e(){var o,i,t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=y(1,20),i="https://api.jikan.moe/v3/top/anime/"+o+"/tv",e.next=4,w(i);case 4:if("error"!==(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:return e.abrupt("return",t.top);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(h.a.mark(function e(o){var i,t;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i={part:"id",q:o+" anime op",type:"video"},e.prev=1,e.next=4,C("AIzaSyA-H_VzliQz91FwmvKsMmmqkUUzbPJnKYk",i);case 4:if("error"!==(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:return e.abrupt("return",t.items[0].id.videoId);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),console.log("Youtube API Error"),e.abrupt("return","error");case 15:case"end":return e.stop()}},e,this,[[1,10]])}));return function(o){return e.apply(this,arguments)}}(),E=i(171),B=i.n(E),M=i(98),O=i.n(M),S=function(e){return new Promise(function(o){return setTimeout(o,e)})},I=function(e){function o(){var e,i;Object(s.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(i=Object(l.a)(this,(e=Object(K.a)(o)).call.apply(e,[this].concat(n)))).state={animationState:"running",frontImg:O.a,wheelAnimes:[],loadedAnimes:[]},i}var i,t;return Object(c.a)(o,e),Object(A.a)(o,[{key:"componentDidMount",value:function(){this.prepareWheelAnimes()}},{key:"prepareWheelAnimes",value:function(){for(var e=[],o=this.props.loadedAnimes;6!==e.length;){var i=y(0,o.length-1),t=o[i];o.splice(i,1),e.push(t)}this.setState({wheelAnimes:e,loadedAnimes:o})}},{key:"refillAnimes",value:(t=Object(f.a)(h.a.mark(function e(){var o,i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=y(0,this.state.loadedAnimes.length-1),this.state.wheelAnimes.push(this.state.loadedAnimes[o]),this.state.loadedAnimes.splice(o,1),!(this.state.loadedAnimes.length<=15)){e.next=8;break}return e.next=6,b();case 6:i=e.sent,this.setState({loadedAnimes:i});case 8:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"prepareAnimeYoutubeVideo",value:(i=Object(f.a)(h.a.mark(function e(o){var i;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(o.title);case 2:if("error"!==(i=e.sent)){e.next=5;break}return e.abrupt("return",this.props.errorActivator());case 5:return e.next=7,S(500);case 7:this.setState({animationState:"finished"}),this.props.videoActivator(i);case 9:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"getImgAngle",value:function(e){var o=window.getComputedStyle(e,null).getPropertyValue("transform");if("none"!==o){var i=o.split("(")[1].split(")")[0].split(","),t=i[0],n=i[1],a=Math.round(Math.atan2(n,t)*(180/Math.PI));return a<0&&(a=360+a),a}}},{key:"endSpinningAnimation",value:function(e,o){var i=this;e.addEventListener("animationiteration",function t(){e.classList.toggle("spinning");var n=document.getElementsByClassName("main-front");n[0].classList.toggle("flipper"),n[0].classList.toggle("is-flipped"),i.prepareAnimeYoutubeVideo(o),e.removeEventListener("animationiteration",t)})}},{key:"restartSpin",value:function(){var e=this,o=document.getElementsByClassName("main-front");o[0].classList.toggle("is-flipped"),this.setState({animationState:"stopping"});o[0].addEventListener("transitionend",function i(){o[0].classList.toggle("flipper"),o[0].removeEventListener("transitionend",i),document.getElementsByClassName("cardBack")[0].classList.toggle("spinning"),e.setState({animationState:"running",frontImg:O.a})})}},{key:"imageClick",value:function(e){if("stopping"!==this.state.animationState&&6===this.state.wheelAnimes.length){if("finished"===this.state.animationState)return this.restartSpin();var o=e.target,i=this.getImgAngle(o),t=Math.floor(i/60),n=this.state.wheelAnimes[t];this.state.wheelAnimes.splice(t,1),console.log("choiced number "+t),this.setState({animationState:"stopping",frontImg:n.image_url}),this.refillAnimes(),this.endSpinningAnimation(o,n)}}},{key:"render",value:function(){var e=this;return n.a.createElement("main",{className:"main-front"},n.a.createElement("img",{className:"card cardBack spinning",src:B.a,onClick:function(o){return e.imageClick(o)},alt:"Card"}),n.a.createElement("img",{className:"card cardFront",src:this.state.frontImg,onClick:function(o){return e.imageClick(o)},alt:"Card"}))}}]),o}(t.Component),D=i(172),j=i.n(D),Q=function(e){return n.a.createElement("section",{className:"loader"},n.a.createElement("div",{className:"spinner"},n.a.createElement("i",null),n.a.createElement("i",null),n.a.createElement("i",null),n.a.createElement("i",null),n.a.createElement("i",null),n.a.createElement("i",null),n.a.createElement("i",null)),n.a.createElement("h1",null,"Loading"))},x=function(e){function o(){var e,i;Object(s.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(i=Object(l.a)(this,(e=Object(K.a)(o)).call.apply(e,[this].concat(n)))).state={msg:""},i}return Object(c.a)(o,e),Object(A.a)(o,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.typeMsg()},this.props.typingSpeed)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"typeMsg",value:function(){var e=this;this.state.msg.length!==this.props.headerMsg.length?this.setState(function(o){return{msg:o.msg.concat(e.props.headerMsg.charAt(o.msg.length))}}):clearInterval(this.timerID)}},{key:"render",value:function(){return n.a.createElement("header",{className:"flex-container header-front"},n.a.createElement("h1",null,this.state.msg))}}]),o}(t.Component),N=function(){return n.a.createElement("footer",{className:"flex-container footer"},n.a.createElement("a",{href:"https://github.com/Augus-top/wheel-of-fate"},n.a.createElement("img",{src:j.a,alt:"Git Page"})))},V=function(e){function o(){var e,i;Object(s.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(i=Object(l.a)(this,(e=Object(K.a)(o)).call.apply(e,[this].concat(n)))).state={error:!1},i.activateError=function(){return i.setState({error:!0})},i}var i;return Object(c.a)(o,e),Object(A.a)(o,[{key:"componentDidMount",value:function(){this.prepareAnimes()}},{key:"prepareAnimes",value:(i=Object(f.a)(h.a.mark(function e(){var o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:if("error"!==(o=e.sent)){e.next=5;break}return e.abrupt("return",this.errorActivator());case 5:this.setState({animes:o});case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"render",value:function(){return this.state.error?n.a.createElement("div",{className:"error"}):void 0===this.state.animes?n.a.createElement(Q,null):n.a.createElement("div",{className:"grid-wrapper"},n.a.createElement(x,{headerMsg:"The Wheel of Fate is Turning",typingSpeed:"50"}),n.a.createElement(I,{loadedAnimes:this.state.animes,videoActivator:this.props.videoActivator,errorActivator:this.activateError}),n.a.createElement(N,null))}}]),o}(t.Component),U=function(e){function o(){var e,i;Object(s.a)(this,o);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(i=Object(l.a)(this,(e=Object(K.a)(o)).call.apply(e,[this].concat(n)))).state={isOpen:!1,videoId:"UiukN_2AVEU"},i.openVideo=function(e){i.setState({isOpen:!0,videoId:e})},i}return Object(c.a)(o,e),Object(A.a)(o,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(p,{channel:"youtube",isOpen:this.state.isOpen,videoId:this.state.videoId,onClose:function(){return e.setState({isOpen:!1})}}),n.a.createElement(V,{videoActivator:this.openVideo}))}}]),o}(t.Component),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var o=e.installing;o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i(418),i(420),i(425),i(428);r.a.render(n.a.createElement(U,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/wheel-of-fate",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/wheel-of-fate","/service-worker.js");F?(function(e){fetch(e).then(function(o){404===o.status||-1===o.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):W(e)})}}()},98:function(e,o){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAEAAAAAAAD//gA8Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gOTUKAP/bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAU8A4QMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9k="}},[[173,2,1]]]);
//# sourceMappingURL=main.b15b2d10.chunk.js.map